"use strict";(self.webpackChunkcomplex_react_app=self.webpackChunkcomplex_react_app||[]).push([[274],{274:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var s=t(294),r=t(983),c=t(625),l=t(257),n=t(847);const m=function(){const e=(0,s.useContext)(r.Z),[a,t]=(0,c.x)({searchTerm:"",results:[],show:"neither",requestCount:0});function m(a){27==a.keyCode&&e({type:"closeSearch"})}return(0,s.useEffect)((()=>(document.addEventListener("keyup",m),()=>document.removeEventListener("keyup",m))),[]),(0,s.useEffect)((()=>{if(a.searchTerm.trim()){const e=setTimeout((()=>{t((e=>{e.show="loading"})),console.log(a.searchTerm),t((e=>{e.requestCount++}))}),750);return()=>clearTimeout(e)}t((e=>{e.show="neither"}))}),[a.searchTerm]),(0,s.useEffect)((()=>{if(a.requestCount){const e=l.Z.CancelToken.source();async function s(){try{const s=await l.Z.post("/search",{searchTerm:a.searchTerm},{cancelToken:e.token});console.log(s.data),t((e=>{e.results=s.data,e.show="results"}))}catch(e){console.log(`There was a problem or the request was cancelled: ${e}`)}}return s(),()=>e.cancel()}}),[a.requestCount]),s.createElement(s.Fragment,null,s.createElement("div",{className:"container container--narrow py-md-5"},s.createElement("h2",null,s.createElement("img",{className:"avatar-small",src:"https://gravatar.com/avatar/b9408a09298632b5151200f3449434ef?s=128"})," ","brad",s.createElement("button",{className:"btn btn-primary btn-sm ml-2"},"Follow ",s.createElement("i",{className:"fas fa-user-plus"}))),s.createElement("div",{className:"profile-nav nav nav-tabs pt-2 mb-4"},s.createElement("a",{href:"#",className:"nav-item nav-link"},"Posts: 3"),s.createElement("a",{href:"#",className:"active nav-item nav-link"},"Followers: 101"),s.createElement("a",{href:"#",className:"nav-item nav-link"},"Following: 40")),s.createElement("div",{className:"list-group"},s.createElement("a",{href:"#",className:"list-group-item list-group-item-action"}," ",s.createElement("img",{className:"avatar-tiny",src:"https://gravatar.com/avatar/b9216295c1e3931655bae6574ac0e4c2?s=128"})," ","barksalot"," "),s.createElement("a",{href:"#",className:"list-group-item list-group-item-action"}," ",s.createElement("img",{className:"avatar-tiny",src:"https://gravatar.com/avatar/b9216295c1e3931655bae6574ac0e4c2?s=128"})," ","barksalot"," "),s.createElement("a",{href:"#",className:"list-group-item list-group-item-action"}," ",s.createElement("img",{className:"avatar-tiny",src:"https://gravatar.com/avatar/b9216295c1e3931655bae6574ac0e4c2?s=128"})," ","barksalot"," "),s.createElement("a",{href:"#",className:"list-group-item list-group-item-action"}," ",s.createElement("img",{className:"avatar-tiny",src:"https://gravatar.com/avatar/b9216295c1e3931655bae6574ac0e4c2?s=128"})," ","barksalot"," "),s.createElement("a",{href:"#",className:"list-group-item list-group-item-action"}," ",s.createElement("img",{className:"avatar-tiny",src:"https://gravatar.com/avatar/b9216295c1e3931655bae6574ac0e4c2?s=128"})," ","barksalot"," "))),s.createElement("div",{className:"search-overlay"},s.createElement("div",{className:"search-overlay-top shadow-sm"},s.createElement("div",{className:"container container--narrow"},s.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},s.createElement("i",{className:"fas fa-search"})),s.createElement("input",{onChange:function(e){const a=e.target.value;t((e=>{e.searchTerm=a}))},autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?"}),s.createElement("span",{onClick:()=>e({type:"closeSearch"}),className:"close-live-search"},s.createElement("i",{className:"fas fa-times-circle"})))),s.createElement("div",{className:"search-overlay-bottom"},s.createElement("div",{className:"container container--narrow py-3"},s.createElement("div",{className:"circle-loader "+("loading"==a.show?"circle-loader--visible":"")}),s.createElement("div",{className:"live-search-results "+("results"==a.show?"live-search-results--visible":"")},Boolean(a.results.length)&&s.createElement("div",{className:"list-group shadow-sm"},s.createElement("div",{className:"list-group-item active"},s.createElement("strong",null,"Search Results")," (",a.results.length,a.results.length>1?"items":"item"," items found)"),a.results.map((a=>s.createElement(n.Z,{post:a,key:a._id,onClick:()=>e({type:"closeSearch"})})))),!Boolean(a.results.length)&&s.createElement("p",{className:"alert alert-danger text-center shadow-sm"},"Sorry, we could not find any results."))))))}}}]);